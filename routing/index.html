
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.8.0">
    
    
      
        <title>Routing & Navigation - Angular Extended Cheat Sheet</title>
      
    
    
      <script src="../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-bfecc7305d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="red" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href=".." title="Angular Extended Cheat Sheet" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Routing & Navigation
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Angular Extended Cheat Sheet
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../component/" title="@Component" class="md-nav__link">
      @Component
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ngModules/" title="@ngModule(s)" class="md-nav__link">
      @ngModule(s)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../built-in-directives/" title="Built-in Directives" class="md-nav__link">
      Built-in Directives
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../template-syntax/" title="Template Syntax" class="md-nav__link">
      Template Syntax
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../pipes/" title="Pipes" class="md-nav__link">
      Pipes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../interfaces/" title="Interfaces" class="md-nav__link">
      Interfaces
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../lifecycle-hooks/" title="Lifecycle Hooks" class="md-nav__link">
      Lifecycle Hooks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../class-field-decorators/" title="Class field decorators" class="md-nav__link">
      Class field decorators
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../communicating-btw-components/" title="Communicating Between Components" class="md-nav__link">
      Communicating Between Components
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../services/" title="Services and Dependency Injection" class="md-nav__link">
      Services and Dependency Injection
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../http/" title="Getting Data With HTTP" class="md-nav__link">
      Getting Data With HTTP
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Routing & Navigation
      </label>
    
    <a href="./" title="Routing & Navigation" class="md-nav__link md-nav__link--active">
      Routing & Navigation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#routing-navigation-basics" title="Routing &amp; Navigation Basics" class="md-nav__link">
    Routing &amp; Navigation Basics
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#router-outlet" title="Router outlet" class="md-nav__link">
    Router outlet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routerlinks" title="Router&nbsp;Links" class="md-nav__link">
    Router&nbsp;Links
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-parameters-snapshot" title="Reading Parameters: snapshot" class="md-nav__link">
    Reading Parameters: snapshot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-programmatically" title="Routing programmatically" class="md-nav__link">
    Routing programmatically
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guards" title="Guards" class="md-nav__link">
    Guards
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canactivate" title="CanActivate" class="md-nav__link">
    CanActivate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#candeactivate" title="CanDeactivate" class="md-nav__link">
    CanDeactivate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolve" title="Resolve" class="md-nav__link">
    Resolve
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../forms/" title="Forms" class="md-nav__link">
      Forms
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../angular-cli/" title="Angular CLI" class="md-nav__link">
      Angular CLI
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3rd-party/" title="3rd Party Library Installation" class="md-nav__link">
      3rd Party Library Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../misc/" title="Miscellaneous" class="md-nav__link">
      Miscellaneous
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#routing-navigation-basics" title="Routing &amp; Navigation Basics" class="md-nav__link">
    Routing &amp; Navigation Basics
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#router-outlet" title="Router outlet" class="md-nav__link">
    Router outlet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routerlinks" title="Router&nbsp;Links" class="md-nav__link">
    Router&nbsp;Links
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-parameters-snapshot" title="Reading Parameters: snapshot" class="md-nav__link">
    Reading Parameters: snapshot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-programmatically" title="Routing programmatically" class="md-nav__link">
    Routing programmatically
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guards" title="Guards" class="md-nav__link">
    Guards
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canactivate" title="CanActivate" class="md-nav__link">
    CanActivate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#candeactivate" title="CanDeactivate" class="md-nav__link">
    CanDeactivate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolve" title="Resolve" class="md-nav__link">
    Resolve
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Routing & Navigation</h1>
                
                <h2 id="routing-navigation-basics">Routing &amp; Navigation Basics</h2>
<div class="filename">src/index.html</div>

<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">base</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/&quot;</span><span class="p">&gt;</span>
</pre></div>


<p>Most routing applications should add a <code>&lt;base&gt;</code> element to the <code>index.html</code> as the first child in the <code>&lt;head&gt;</code> tag to tell the router how to compose navigation URLs.</p>
<div class="filename">app.module.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">RouterModule</span><span class="p">,</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">appRoutes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./routes&#39;</span><span class="p">;</span>

<span class="kd">@NgModule</span><span class="p">({</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">appRoutes</span><span class="p">,</span> <span class="p">{</span> <span class="nx">enableTracing</span>: <span class="kt">true</span> <span class="p">})</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>


<div class="filename">routes.ts</div>

<div class="codehilite"><pre><span></span><span class="p">...</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">appRoutes</span>: <span class="kt">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;movies&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">MovieListComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;movie/:id&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">MovieDetailComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">WelcomeComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">&#39;welcome&#39;</span> <span class="nx">pathMatch</span><span class="o">:</span> <span class="s1">&#39;full&#39;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;**&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">PageNotFoundComponent</span> <span class="p">},</span>
<span class="p">];</span>
</pre></div>


<p>The <code>appRoutes</code> array of <em>routes</em> describes how to navigate. Pass it to the <code>RouterModule.forRoot</code> method in the module <code>imports</code> to configure the router.</p>
<p>Each <code>Route</code> maps a URL <code>path</code> to a component. There are <em>no leading slashes</em> in the <em>path</em>. The router parses and builds the final URL for you, allowing you to use both relative and absolute paths when navigating between application views.</p>
<p>The <code>:id</code> in the second route is a token for a route parameter. In a URL such as <code>/movie/42</code>, "42" is the value of the <code>id</code> parameter. The corresponding <code>MovieDetailComponent</code> will use that value to find and present the movie whose <code>id</code> is 42. You'll learn more about route parameters later in this guide.</p>
<p>The <code>data</code> property in the third route is a place to store arbitrary data associated with this specific route. The data property is accessible within each activated route. Use it to store items such as page titles, breadcrumb text, and other read-only, <em>static</em> data. You'll use the resolve guard to retrieve <em>dynamic</em> data later in the guide.</p>
<p>The <strong>empty path</strong> in the fourth route represents the default path for the application, the place to go when the path in the URL is empty, as it typically is at the start. This default route redirects to the route for the <code>/movies</code> URL and, therefore, will display the <code>MoviesListComponent</code>.</p>
<p>The <code>**</code> path in the last route is a <strong>wildcard</strong>. The router will select this route if the requested URL doesn't match any paths for routes defined earlier in the configuration. This is useful for displaying a "404 - Not Found" page or redirecting to another route.</p>
<p><strong>The order of the routes in the configuration matters</strong> and this is by design. The router uses a <strong>first-match wins</strong> strategy when matching routes, so more specific routes should be placed above less specific routes. In the configuration above, routes with a static path are listed first, followed by an empty path route, that matches the default route. The wildcard route comes last because it matches <em>every URL</em> and should be selected <em>only</em> if no other routes are matched first.</p>
<p>If you need to see what events are happening during the navigation lifecycle, there is the <strong>enableTracing</strong> option as part of the router's default configuration. This outputs each router event that took place during each navigation lifecycle to the browser console. This should only be used for <em>debugging</em> purposes. You set the <code>enableTracing: true</code> option in the object passed as the second argument to the <code>RouterModule.forRoot()</code> method.</p>
<h3 id="router-outlet">Router outlet</h3>
<div class="filename">src/app/app.component.html</div>

<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Angular Router<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
</pre></div>


<p><code>router-outlet</code> acts as a placeholder that Angular dynamically fills based on the current router state.</p>
<h3 id="routerlinks">Router&nbsp;Links</h3>
<div class="filename">src/app/app.component.html</div>

<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Angular Router<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">routerLink</span><span class="o">=</span><span class="s">&quot;/movies&quot;</span> <span class="na">routerLinkActive</span><span class="o">=</span><span class="s">&quot;active&quot;</span><span class="p">&gt;</span>Movies<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span>
    <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">movie</span><span class="err">&#39;,</span> <span class="na">movie</span><span class="err">.</span><span class="na">id</span><span class="err">]&quot;</span>
    <span class="na">routerLinkActive</span><span class="o">=</span><span class="s">&quot;active&quot;</span>
    <span class="err">[</span><span class="na">routerLinkActiveOptions</span><span class="err">]={</span><span class="na">exact:true</span><span class="err">}</span> <span class="p">&gt;</span>{{ movie.name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
</pre></div>


<p>The <code>RouterLink</code> directives on the anchor tags give the router control over those elements. The navigation paths are fixed, so you can assign a string to the <code>routerLink</code> (a "one-time" binding).</p>
<p>Had the navigation path been more dynamic, you could have bound to a template expression that returned an array of route link parameters (the <em>link parameters array</em>). The router resolves that array into a complete URL.</p>
<p>The <code>RouterLinkActive</code> directive on each anchor tag helps visually distinguish the anchor for the currently selected "active" route. The router adds the <code>active</code> CSS class to the element when the associated <em>RouterLink</em> becomes active. You can add this directive to the anchor or to its parent element.</p>
<h3 id="reading-parameters-snapshot">Reading Parameters: <code>snapshot</code></h3>
<div class="filename">movie.component.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="p">...</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MovieComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">_route</span>: <span class="kt">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">id</span> <span class="o">=</span> <span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">_route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>When you know for certain that an instance of a <code>Component</code> will <em>never, never, ever</em> be re-used, you can simplify the code with the <em>snapshot</em>.</p>
<p>The <code>route.snapshot</code> provides the initial value of the route parameter map. You can access the parameters directly without subscribing or adding observable operators. It's much simpler to write and read:</p>
<p><strong>Remember:</strong> you only get the <em>initial</em> value of the parameter map with this technique. Stick with the observable <code>paramMap</code> approach if there's even a chance that the parameter will change without leaving the page.</p>
<h3 id="routing-programmatically">Routing programmatically</h3>
<div class="filename">movie.component.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
  <span class="p">...</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MovieComponent</span> <span class="p">{</span>
  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">_router</span>: <span class="kt">Router</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">onBack</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;movies&#39;</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="guards">Guards</h2>
<p>You can add <em>guards</em> to the route configuration to handle scenarios such as:</p>
<ul>
<li>Perhaps the user is not authorized to navigate to the target component.</li>
<li>Maybe the user must login (<em>authenticate</em>) first.</li>
<li>Maybe you should fetch some data before you display the target component.</li>
<li>You might want to save pending changes before leaving a component.</li>
<li>You might ask the user if it's OK to discard pending changes rather than save them.</li>
</ul>
<p>A guard's return value controls the router's behavior:</p>
<ul>
<li>If it returns <code>true</code>, the navigation process continues.</li>
<li>If it returns <code>false</code>, the navigation process stops and the user stays put.</li>
</ul>
<p>The guard can also tell the router to navigate elsewhere, effectively canceling the current navigation.</p>
<p>The router supports multiple guard interfaces:</p>
<ul>
<li>
<p><code>CanActivate</code> to mediate navigation <em>to</em> a route.</p>
</li>
<li>
<p><code>CanActivateChild</code> to mediate navigation <em>to</em> a child route.</p>
</li>
<li>
<p><code>CanDeactivate</code> to mediate navigation <em>away</em> from the current route.</p>
</li>
<li>
<p><code>Resolve</code> to perform route data retrieval <em>before</em> route activation.</p>
</li>
<li>
<p><code>CanLoad</code> to mediate navigation <em>to</em> a feature module loaded <em>asynchronously</em>.</p>
</li>
</ul>
<p>For creating Route Guards, we can use a Service or a Function. On the following examples, a <code>CanActivate</code> Service is used to check if the id of a movie exists. A <code>CanDeactivate</code> function is used to prevent the user navigating away from the new movies form if the form is dirty.</p>
<div class="filename">routes.ts</div>

<div class="codehilite"><pre><span></span><span class="p">...</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">MovieGuard</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./movies/movie-guard.service.ts&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">checkDirtyState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./movies/chech-dirty.ts&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">appRoutes</span>: <span class="kt">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span>
    <span class="s1">&#39;movie/new&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">MovieListComponent</span><span class="p">,</span>
    <span class="nx">canDeactivate</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;canDeactivateCreateMovieGuard&#39;</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;movies&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">MovieListComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span>
    <span class="s1">&#39;movie/:id&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">MovieDetailComponent</span><span class="p">,</span>
    <span class="nx">canActivate</span><span class="o">:</span> <span class="p">[</span> <span class="nx">MovieGuard</span> <span class="p">]</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;404&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">Error404Component</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">&#39;welcome&#39;</span> <span class="nx">pathMatch</span><span class="o">:</span> <span class="s1">&#39;full&#39;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;**&#39;</span><span class="p">,</span> <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">&#39;404&#39;</span> <span class="p">},</span>
<span class="p">];</span>
</pre></div>


<p>The <code>MovieGuard</code> Service and the <code>canDeactivateCreateMovieGuard</code> function should be added as providers.</p>
<div class="filename">app.module.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">MovieGuard</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./movies/movie-guard.service.ts&#39;</span><span class="p">;</span>

<span class="kd">@NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">MovieGuard</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="nx">provide</span><span class="o">:</span> <span class="s1">&#39;canDeactivateCreateMovieGuard&#39;</span><span class="p">,</span>
      <span class="nx">useValue</span>: <span class="kt">checkDirtyState</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>


<h3 id="canactivate">CanActivate</h3>
<p>Service used as the CanActivate Guard.</p>
<div class="filename">movie-guard.service.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span> <span class="nx">CanActivate</span><span class="p">,</span> <span class="nx">Router</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">MovieService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared.movie.service&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MovieGuard</span> <span class="kr">implements</span> <span class="nx">CanActivate</span> <span class="p">{</span>
  <span class="kr">constructor</span> <span class="p">(</span>
    <span class="kr">private</span> <span class="nx">_movieService</span>:<span class="kt">MovieService</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">_router</span>:<span class="kt">Router</span>
    <span class="p">)</span> <span class="p">{}</span>

  <span class="nx">canActivate</span><span class="p">(</span><span class="nx">route</span>:<span class="kt">ActivatedRouteSnapshot</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">movieExists</span> <span class="o">=</span> <span class="o">!!</span><span class="k">this</span><span class="p">.</span><span class="nx">_movieService</span><span class="p">.</span><span class="nx">getMovie</span><span class="p">(</span><span class="o">+</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">movieExists</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;404&#39;</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">movieExists</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="candeactivate">CanDeactivate</h3>
<p>Function used as the CanDeactivate Guard.</p>
<div class="filename">chech-dirty.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">export</span> <span class="kd">function</span> <span class="nx">checkDirtyState</span><span class="p">(</span><span class="nx">component</span>:<span class="kt">CreateMovieComponent</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">component</span><span class="p">.</span><span class="nx">isDirty</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">confirm</span><span class="p">(</span><span class="s1">&#39;Really want to cancel?&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<div class="filename">create-movie.component.ts</div>

<div class="codehilite"><pre><span></span><span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;create-movie&#39;</span><span class="p">,</span>
  <span class="nx">template</span><span class="o">:</span> <span class="sb">`...`</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateMovieComponent</span> <span class="p">{</span>
  <span class="nx">isDirty</span>: <span class="kt">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="kr">constructor</span> <span class="p">(</span><span class="kr">private</span> <span class="nx">_router</span>: <span class="kt">Router</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">cancel() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/movies&#39;</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="resolve">Resolve</h2>
<p>If you were using a real world API, there might be some delay before the data to display is returned from the server. You don't want to display a blank component while waiting for the data.</p>
<p>It's preferable to pre-fetch data from the server so it's ready the moment the route is activated. This also allows you to handle errors before routing to the component. There's no point in navigating to a Movie detail for an <code>id</code> that doesn't have a record. It'd be better to send the user back to the <code>Movies List</code> that shows only valid Movies.</p>
<p>In summary, you want to delay rendering the routed component until all necessary data have been fetched.</p>
<p>You need a <em>resolver</em>.</p>
<div class="filename">movie-resolver.service.ts</div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span><span class="p">,</span> <span class="nx">Router</span><span class="p">,</span> <span class="nx">Resolve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MovieResolver</span> <span class="kr">implements</span> <span class="nx">Resolve</span><span class="o">&lt;</span><span class="nx">IMovie</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kr">constructor</span><span class="p">(</span>
    <span class="kr">private</span> <span class="nx">_movieService</span>: <span class="kt">MovieService</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">_router</span>: <span class="kt">Router</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">_route</span>: <span class="kt">ActivatedRoute</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">resolve() {</span>
    <span class="kd">let</span> <span class="nx">id</span> <span class="o">=</span> <span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">_route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
    <span class="kd">let</span> <span class="nx">movie</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_movieService</span><span class="p">.</span><span class="nx">getEvent</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">movie</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">movie</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// id not found</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/movies&#39;</span><span class="p">]);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<div class="filename">/movie.service.ts</div>

<div class="codehilite"><pre><span></span><span class="kd">@Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MovieService</span> <span class="p">{</span>
  <span class="nx">getMovie</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">IMovie</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Subject</span><span class="p">();</span>
    <span class="kd">let</span> <span class="nx">movie</span> <span class="o">=</span> <span class="nx">MOVIES</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">movie</span> <span class="o">=&gt;</span> <span class="nx">movie</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">);</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">movie</span><span class="p">);</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">subject</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<div class="filename">routes.ts</div>

<div class="codehilite"><pre><span></span><span class="p">...</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">appRoutes</span>: <span class="kt">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">...</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;movies&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">MovieListComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span>
    <span class="s1">&#39;movie/:id&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">MovieDetailComponent</span><span class="p">,</span>
    <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span> <span class="nx">movieData</span>: <span class="kt">MovieResolver</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">...</span>
<span class="p">];</span>
</pre></div>


<p>Note that the returned data of <code>MovieResolver</code> is assigned to <code>movieData</code>. Then, on the Component, <code>movieData</code> is retrieved from the route snapshot array.</p>
<div class="filename">movie.component.ts</div>

<div class="codehilite"><pre><span></span><span class="p">...</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MoviesComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">movie</span>: <span class="kt">IMovie</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span>
    <span class="kr">private</span> <span class="nx">movieService</span>: <span class="kt">MovieService</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">_route</span>: <span class="kt">ActivatedRoute</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">movie</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;movieData&#39;</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<div class="filename">app.module.ts</div>

<div class="codehilite"><pre><span></span><span class="kd">@NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">MovieResolver</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../http/" title="Getting Data With HTTP" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Getting Data With HTTP
              </span>
            </div>
          </a>
        
        
          <a href="../forms/" title="Forms" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Forms
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-1d6ee6ee6c.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>